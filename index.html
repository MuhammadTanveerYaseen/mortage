<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Future Wife - Jan-e-Jahan Areej Fatima</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        const { jsPDF } = window.jspdf;
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0f0f1a;
            overflow-x: hidden;
            color: #fff;
        }
        .handwritten {
            font-family: 'Dancing Script', cursive;
        }
        .bg-romantic {
            background: linear-gradient(135deg, #0f0524 0%, #3a154f 25%, #892584 50%, #d63e72 75%, #ff7b93 100%);
        }
        .particle {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            pointer-events: none;
        }
        .flower {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            opacity: 0.7;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg) scale(1); }
            25% { transform: translateY(-10px) rotate(2deg) scale(1.05); }
            50% { transform: translateY(-20px) rotate(5deg) scale(1.1); }
            75% { transform: translateY(-10px) rotate(2deg) scale(1.05); }
            100% { transform: translateY(0) rotate(0deg) scale(1); }
        }
        .rose-petal {
            position: absolute;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23ff69b4" d="M50,15 C60,0 80,5 85,20 C90,35 70,50 50,65 C30,50 10,35 15,20 C20,5 40,0 50,15 Z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.8;
            animation: petal-fall 8s linear infinite;
        }
        .kiss {
            animation-name: petal-fall-kiss;
            z-index: 1;
        }
        @keyframes petal-fall {
            0% { transform: translate(0, -10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translate(calc(50vw - 50%), 100vh) rotate(360deg); opacity: 0; }
        }
        @keyframes petal-fall-kiss {
            0% { transform: translate(0, -10vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; transform: scale(1.2); }
            50% { transform: scale(1.5); }
            100% { transform: translate(calc(50vw - 50%), 100vh) rotate(360deg) scale(0.8); opacity: 0; }
        }
        .message-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 10px -10px #6743a1; }
            to { box-shadow: 0 0 20px 5px #27079c; }
        }
        .btn-romantic {
            background: linear-gradient(45deg, #9a1f6a, #4a1e6a);
            transition: all 0.3s ease;
        }
        .btn-romantic:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgb(242, 159, 25);
        }
        .hearts {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff0000"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center center;
            pointer-events: none;
            opacity: 0;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: rgba(235, 221, 221, 0.948);
            opacity: 0;
        }
    </style>
</head>
<body class="bg-romantic min-h-screen flex flex-col items-center justify-center relative overflow-hidden">
    <!-- Background elements -->
    <div id="particles"></div>
    <div id="flowers"></div>
    <div id="hearts-container"></div>
    
    <!-- Romantic Verse -->
    <div class="absolute top-4 left-4 z-50 text-pink-200 italic handwritten text-sm md:text-base">
        "From my first glance, I measured eternity<br>
        Through your eyes, I found infinity<br>
        Happy Birthday to my heart's compass"
    </div>

    <!-- Audio Toggle -->
    <div class="absolute top-4 right-4 z-50">
        <button id="musicToggle" class="bg-pink-600 hover:bg-pink-700 text-white rounded-full p-3 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 011.414 1.414" />
            </svg>
        </button>
        <audio id="bgMusic" loop>
            <source src="./song.mp3" type="audio/mpeg">
            <!-- Backup romantic flute music -->
            <source src="./song.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-12 z-10 max-w-4xl">
        <div id="stepContainer" class="flex flex-col items-center">
            <!-- Step 1 will be inserted here -->
        </div>
    </div>

    <!-- Final Celebration (hidden initially) -->
    <div id="finalCelebration" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden">
        <div class="text-center p-8 max-w-4xl">
            <h1 class="handwritten text-2xl md:text-7xl text-pink-400 mb-6 glow">Happy Birthday My Eternal Love Areej Fatima MY LOVE Jan E jahan ğŸ’œØ§Ù†Øª Ø§Ù„Ø­ÛŒØ§ØªğŸ’œ </h1>
            <div id="finalSparkles" class="my-8"></div>
            <p class="text-xl mb-8 handwritten">"My soul recognizes yours like the moon recognizes its ocean - drawn in inevitable tide. On this day when the universe first received your light, I celebrate the miracle of your existence. May Allah bless every step with grace, every breath with joy, and every moment with love as infinite as my devotion to you - today and for all the beautiful tomorrows we'll share together."</p>
            <button id="downloadBtn" class="btn-romantic text-white font-bold py-3 px-6 rounded-full text-lg mb-4">
                Download Our Love Letter
            </button>
            <button id="restartBtn" class="bg-white text-pink-600 font-bold py-3 px-6 rounded-full text-lg">
                Relive Our Story
            </button>
        </div>
    </div>

    <script>
        // Gift icons mapping
        function getGiftIcon(giftType) {
            const icons = {
                ring: 'ğŸ’',
                memory: 'ğŸ“·',
                nameplate: 'ğŸ·ï¸',
                hijab: 'ğŸ§•',
                heart: 'â¤ï¸',
                book: 'ğŸ“–',
                smile: 'ğŸ˜Š',
                eyes: 'ğŸ‘€',
                shield: 'ğŸ›¡ï¸',
                prayer: 'ğŸ•Œ',
                music: 'ğŸµ',
                hands: 'ğŸ¤²',
                home: 'ğŸ ',
                lamp: 'ğŸ’¡',
                clock: 'â³',
                mosque: 'ğŸ•Œ',
                food: 'ğŸ²',
                anchor: 'âš“',
                scroll: 'ğŸ“œ',
                eternity: 'âˆ'
            };
            return icons[giftType] || 'ğŸ’œ';
        }

        // Data for all 20 steps
        const steps = [
      
  {
    title: "First Sight, Forever Flame",
    message: "You were seated on that lab chair, unaware of the storm you stirred in my heart. In that single moment, love etched your name into my soul.",
    gift: "memory", // ğŸ“·
    bgEffect: "stars"
  },
  {
    title: "Eyes That Ruined Me",
    message: "Your eyes didn't just meet mineâ€”they melted time, silenced the world, and made me yours before either of us spoke a word.",
    gift: "eyes", // ğŸ‘€
    bgEffect: "sparkles"
  },
  {
    title: "Veil of Desire",
    message: "That abaya you wore wrapped you in graceâ€”and mystery. You awakened in me a craving not for your body, but for every breath you take.",
    gift: "hijab", // ğŸ§•
    bgEffect: "glow"
  },
  {
    title: "Scent of Heaven",
    message: "The moment your scent reached me, I inhaled desire. You smelled like a dream I never wanted to wake from.",
    gift: "scroll", // ğŸ“œ (symbolic for hidden essence)
    bgEffect: "petals"
  },
  {
    title: "Whispered Kisses",
    message: "My lips long to whisper secrets against yoursâ€”slowly, softlyâ€”until words disappear and only our breath remains.",
    gift: "heart", // â¤ï¸
    bgEffect: "hearts"
  },
  {
    title: "Touch Me Once",
    message: "A single touch from you could collapse my universe. I ache for the warmth of your fingers threading into mine.",
    gift: "hands", // ğŸ¤²
    bgEffect: "stars"
  },
  {
    title: "Your Voice, My Melody",
    message: "Your voice isnâ€™t soundâ€”itâ€™s a spell. Every syllable you speak plays like a forbidden song I never want to stop hearing.",
    gift: "music", // ğŸµ
    bgEffect: "glow"
  },
  {
    title: "That Smile... God, That Smile",
    message: "Your smile? It's the kind that ruins men. It's the kind that made me fall and never once want to get back up.",
    gift: "smile", // ğŸ˜Š
    bgEffect: "sparkles"
  },
  {
    title: "Curves and Chaos",
    message: "The curve of your waist, the sway of your stepâ€”how effortlessly you turn modesty into madness inside me.",
    gift: "shield", // ğŸ›¡ï¸ (symbolic for modesty)
    bgEffect: "petals"
  },
  {
    title: "Sleepless For You",
    message: "I lie awake craving the night youâ€™ll sleep beside meâ€”your warmth, your breath, your body tangled in mine.",
    gift: "clock", // â³
    bgEffect: "hearts"
  },
  {
    title: "Softest Skin, Deepest Sin",
    message: "I haven't touched your skin, yet I dream of it nightlyâ€”how my hands would memorize its map like holy scripture.",
    gift: "scroll", // ğŸ“œ
    bgEffect: "stars"
  },
  {
    title: "Your Modesty, My Madness",
    message: "Even your silence seduces. Even the glimpse of your wrist drives me wild. You donâ€™t flaunt, and yet I burn.",
    gift: "shield", // ğŸ›¡ï¸
    bgEffect: "glow"
  },
  {
    title: "My Hidden Hunger",
    message: "I want to explore every inch of your body with reverence and fireâ€”both pilgrim and poet, writing sonnets on your skin.",
    gift: "book", // ğŸ“–
    bgEffect: "sparkles"
  },
  {
    title: "Love in Your Laughter",
    message: "Your laughter is chaos wrapped in sunshine. It pulls me in like gravity and holds me like a prayer.",
    gift: "lamp", // ğŸ’¡
    bgEffect: "petals"
  },
  {
    title: "Mornings with You",
    message: "Lazy sunlight, tangled sheets, your sleepy smileâ€”this is how I want every morning to begin. With you. Always you.",
    gift: "home", // ğŸ 
    bgEffect: "hearts"
  },
  {
    title: "Fire in Your Eyes",
    message: "Your eyes aren't just brownâ€”theyâ€™re galaxies ablaze. I see storms, I see dreams, I see forever when you look at me.",
    gift: "eyes", // ğŸ‘€
    bgEffect: "stars"
  },
  {
    title: "Your Mind, My Obsession",
    message: "Your intelligence turns me on more than curves ever could. You think like a queen, and thatâ€™s how I want to worship you.",
    gift: "book", // ğŸ“–
    bgEffect: "glow"
  },
  {
    title: "Naked Without Touch",
    message: "Even without touching you, I feel naked before you. Every heartbeat, every stare, strips me bare.",
    gift: "nameplate", // ğŸ·ï¸ (symbolic for exposed identity)
    bgEffect: "sparkles"
  },
  {
    title: "Future in Your Arms",
    message: "One day, weâ€™ll share a bed where dreams melt into breath, and your body becomes my entire definition of home.",
    gift: "ring", // ğŸ’
    bgEffect: "petals"
  },
  {
    title: "The Night I Take You",
    message: "There will be a night where the moon blushes for us. When I finally undress your soul... and your body follows.",
    gift: "anchor", // âš“ (symbolic for intense longing)
    bgEffect: "hearts"
  },
  {
    title: "My Everything",
    message: "You are not just my lover, Areej. You are my breath, my rhythm, the ache in my bones when youâ€™re not near.",
    gift: "heart", // â¤ï¸
    bgEffect: "stars"
  },
  {
    title: "Our Fire",
    message: "Weâ€™re not just loveâ€”weâ€™re combustion. Weâ€™re everything poets fear and crave at once. We are wildfire.",
    gift: "lamp", // ğŸ’¡ (symbolic for burning fire)
    bgEffect: "glow"
  },
  {
    title: "Last Breath, Your Name",
    message: "If I die with your name on my lips, Iâ€™ll have lived fully. You are the only afterlife I seek in this life.",
    gift: "nameplate", // ğŸ·ï¸
    bgEffect: "sparkles"
  },
  {
    title: "The Final Step",
    message: "This journey through my heart was for you, Jan-e-Jahan. Iâ€™ll spend my life proving that every word was real, every feeling eternal.",
    gift: "eternity", // âˆ
    bgEffect: "petals"
  },
  {
    title: "My Eternal Vow",
    message: "I love you wildly, shamelessly, endlessly. Not as a man loves a womanâ€”but as fire loves oxygen. I am yours, Areej. Entirely. Eternally.",
    gift: "eternity", // âˆ
    bgEffect: "glow"
  }
,


            {
                title: "Beyond Time",
                message: "If I could rewrite history, I'd place our love at the center of every civilization. Paint us in hieroglyphics, carve our story in stone, weave our names into ancient tapestries. Let the universe remember how completely I adored you. When shaytan tried to divide us, our sabr became legendary. When distance tested us, our love grew ferocious. This isn't just romance - it's revolution, quiet yet earth-shattering. I promise to love you with the intensity of a thousand supernovas yet with the tenderness of dawn's first light. You deserve passion that shakes the heavens and devotion that outlasts the stars.",
                gift: "cosmos",
                bgEffect: "stars"
            },
            {
                title: "Our Last Dance",
                message: "When time has silvered our hair and softened our steps, I'll still reach for you in the dark with the same reverence as our first halal touch. Your wrinkles will be the sacred map of our adventures, each line a love letter written by time itself. Even when our hands tremble, they'll find each other with the same magnetic pull as when we were young. And when the angel of death comes - whether for me or for you - know this with certainty: I will be waiting at the gates of Jannah, not as an old man but as your eternal lover, radiant with youth, arms outstretched to receive you. There, beneath Allah's merciful gaze, our souls will dance again - not with the slow steps of age but with the boundless energy of eternal love. For this life is just our first meeting, habibti. The real romance begins when we meet again in gardens beneath which rivers flow.",
                gift: "infinity",
                bgEffect: "glow"
            }
        ];

        // DOM elements
        const stepContainer = document.getElementById('stepContainer');
        const particlesContainer = document.getElementById('particles');
        const flowersContainer = document.getElementById('flowers');
        const heartsContainer = document.getElementById('hearts-container');
        const finalCelebration = document.getElementById('finalCelebration');
        const finalSparkles = document.getElementById('finalSparkles');
        const musicToggle = document.getElementById('musicToggle');
        const bgMusic = document.getElementById('bgMusic');
        const downloadBtn = document.getElementById('downloadBtn');
        const restartBtn = document.getElementById('restartBtn');

        // Current step index
        let currentStep = 0;

        // Initialize the app
        function init() {
            createBackgroundElements();
            showStep(currentStep);
            setupEventListeners();
        }

        // Create floating background elements
        function createBackgroundElements() {
            // Create rose petals and kisses
            for (let i = 0; i < 100; i++) { // Increased to 100 petals for more romance
                // Rose petals
                const petal = document.createElement('div');
                petal.className = 'rose-petal';
                petal.style.width = `${Math.random() * 50 + 30}px`; // Increased size range
                petal.style.height = petal.style.width;
                petal.style.left = `${Math.random() * 100}vw`;
                petal.style.top = `-10vh`;
                petal.style.animationDelay = `${Math.random() * 5}s`;
                document.body.appendChild(petal);
                
                // Kisses (added new elements)
                if (i % 2 === 0) { // Create kisses for half the iterations
                    const kiss = document.createElement('div');
                    kiss.className = 'rose-petal kiss';
                    kiss.style.width = `${Math.random() * 60 + 30}px`; // Larger size range
                    kiss.style.height = kiss.style.width;
                    kiss.style.left = `${Math.random() * 100}vw`;
                    kiss.style.top = `-10vh`;
                    kiss.style.animationDelay = `${Math.random() * 5 + 2}s`;
                    kiss.style.backgroundImage = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23ff69b4\'><path d=\'M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\'/></svg>")';
                    document.body.appendChild(kiss);
                }
            }
            
            // Create particles
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 5 + 2}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                particle.style.opacity = Math.random() * 0.5 + 0.1;
                particle.style.animation = `float ${Math.random() * 10 + 5}s linear infinite`;
                particlesContainer.appendChild(particle);
            }

            // Create flowers
            const flowerColors = ['ğŸŒ¹', 'ğŸŒ¹', 'ğŸŒ¹', 'ğŸŒ¸', 'ğŸŒº']; // More roses
            for (let i = 0; i < 15; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.style.fontSize = `${Math.random() * 20 + 10}px`;
                flower.style.left = `${Math.random() * 100}vw`;
                flower.style.top = `${Math.random() * 100}vh`;
                flower.style.animationDelay = `${Math.random() * 5}s`;
                flower.textContent = flowerColors[Math.floor(Math.random() * flowerColors.length)];
                flowersContainer.appendChild(flower);
            }
        }

        // Show a specific step
        function showStep(stepIndex) {
            if (stepIndex >= steps.length) {
                showFinalCelebration();
                return;
            }

            const step = steps[stepIndex];
            
            // Clear previous step
            stepContainer.innerHTML = '';
            
            // Create step elements
            const stepElement = document.createElement('div');
            stepElement.className = 'message-card rounded-2xl p-8 w-full text-center transform transition-all duration-500';
            
            // Create title
            const titleElement = document.createElement('h2');
            titleElement.className = 'handwritten text-4xl md:text-5xl text-pink-300 mb-6';
            titleElement.textContent = step.title;
            
            // Create message
            const messageElement = document.createElement('p');
            messageElement.className = 'text-lg md:text-xl mb-8 leading-relaxed';
            messageElement.textContent = step.message;
            
            // Create gift box
            const giftContainer = document.createElement('div');
            giftContainer.className = 'relative my-8 flex justify-center';
            
            const giftBox = document.createElement('div');
            giftBox.className = 'gift-box relative w-24 h-24 md:w-32 md:h-32 cursor-pointer';
            giftBox.innerHTML = `
                <div class="absolute inset-0 bg-pink-500 rounded-lg flex items-center justify-center text-4xl md:text-5xl">
                    ğŸ
                </div>
                <div class="gift-content absolute inset-0 bg-purple-500 rounded-lg flex flex-col items-center justify-center text-white">
                    <span class="text-4xl md:text-5xl">${getGiftIcon(step.gift)}</span>
                    <span class="text-xs mt-2">Gift ${stepIndex + 1}</span>
                </div>
            `;
            
            // Create next button
            const nextButton = document.createElement('button');
            nextButton.className = 'btn-romantic text-white font-bold py-3 px-8 rounded-full text-lg mt-6';
            nextButton.textContent = stepIndex === steps.length - 1 ? 'Final Promise' : 'Continue Our Journey';
            
            // Add elements to step
            giftContainer.appendChild(giftBox);
            stepElement.appendChild(titleElement);
            stepElement.appendChild(messageElement);
            stepElement.appendChild(giftContainer);
            stepElement.appendChild(nextButton);
            stepContainer.appendChild(stepElement);
            
            nextButton.addEventListener('click', function() {
                currentStep++;
                showStep(currentStep);
            });
            
            // Trigger background effect
            triggerBackgroundEffect(step.bgEffect);
        }

        // Show final celebration
        function showFinalCelebration() {
            finalCelebration.classList.remove('hidden');
            createConfetti(100);
            playCelebrationSound();
        }

        // Create hearts animation
        function createHearts(count) {
            for (let i = 0; i < count; i++) {
                const heart = document.createElement('div');
                heart.className = 'hearts';
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.top = `${Math.random() * 100}%`;
                heart.style.width = `${Math.random() * 30 + 10}px`;
                heart.style.height = heart.style.width;
                heart.style.animation = `float ${Math.random() * 3 + 2}s linear forwards`;
                heart.style.opacity = '1';
                
                heartsContainer.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    heart.remove();
                }, 3000);
            }
        }

        // Create confetti for final celebration
        function createConfetti(count) {
            finalSparkles.innerHTML = '';
            const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff'];
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `-10px`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                
                finalSparkles.appendChild(confetti);
                
                // Animate confetti
                setTimeout(() => {
                    confetti.style.opacity = '1';
                    confetti.style.transform = `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`;
                    confetti.style.transition = `all ${Math.random() * 3 + 2}s linear`;
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Trigger background effects based on step
        function triggerBackgroundEffect(effect) {
            switch(effect) {
                case 'stars':
                    createStars();
                    break;
                case 'petals':
                    createPetals();
                    break;
                case 'glow':
                    document.body.classList.add('glow');
                    setTimeout(() => document.body.classList.remove('glow'), 2000);
                    break;
                case 'sparkles':
                    createSparkles();
                    break;
                case 'hearts':
                    createHearts(15);
                    break;
            }
        }

        // Create stars effect
        function createStars() {
            const stars = document.createElement('div');
            stars.className = 'absolute inset-0 overflow-hidden';
            
            for (let i = 0; i < 30; i++) {
                const star = document.createElement('div');
                star.className = 'absolute bg-white rounded-full';
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.opacity = '0';
                star.style.animation = `twinkle ${Math.random() * 3 + 2}s infinite alternate`;
                
                stars.appendChild(star);
            }
            
            document.body.appendChild(stars);
            
            // Remove after animation
            setTimeout(() => {
                stars.remove();
            }, 3000);
        }

        // Create petals effect
        function createPetals() {
            const petals = document.createElement('div');
            petals.className = 'absolute inset-0 overflow-hidden';
            
            for (let i = 0; i < 20; i++) {
                const petal = document.createElement('div');
                petal.className = 'absolute';
                petal.style.fontSize = `${Math.random() * 20 + 10}px`;
                petal.style.left = `${Math.random() * 100}%`;
                petal.style.top = `-30px`;
                petal.textContent = 'ğŸŒ¸';
                petal.style.opacity = '0';
                petal.style.animation = `fall ${Math.random() * 5 + 3}s linear forwards`;
                
                petals.appendChild(petal);
            }
            
            document.body.appendChild(petals);
            
            // Remove after animation
            setTimeout(() => {
                petals.remove();
            }, 5000);
        }

        // Create sparkles effect
        function createSparkles() {
            const sparkles = document.createElement('div');
            sparkles.className = 'absolute inset-0 overflow-hidden';
            
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'absolute bg-yellow-200 rounded-full';
                sparkle.style.width = `${Math.random() * 5 + 2}px`;
                sparkle.style.height = sparkle.style.width;
                sparkle.style.left = `${Math.random() * 100}%`;
                sparkle.style.top = `${Math.random() * 100}%`;
                sparkle.style.opacity = '0';
                sparkle.style.animation = `sparkle ${Math.random() * 1 + 0.5}s infinite alternate`;
                
                sparkles.appendChild(sparkle);
            }
            
            document.body.appendChild(sparkles);
            
            // Remove after animation
            setTimeout(() => {
                sparkles.remove();
            }, 2000);
        }

        // Play sparkle sound
        function playSparkleSound() {
            // In a real app, you would play an actual sound file here
            console.log("Sparkle sound played");
        }

        // Play celebration sound
        function playCelebrationSound() {
            // In a real app, you would play an actual sound file here
            console.log("Celebration sound played");
        }

        // Setup event listeners
        function setupEventListeners() {
            // Music toggle
            musicToggle.addEventListener('click', function() {
                if (bgMusic.paused) {
                    bgMusic.play();
                    musicToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" /></svg>';
                } else {
                    bgMusic.pause();
                    musicToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 011.414 1.414" /></svg>';
                }
            });

            // Download button
            downloadBtn.addEventListener('click', function() {
                // Create a PDF of all messages
                const doc = new jsPDF();
                doc.setFontSize(22);
                doc.text('Our Love Story', 105, 20, null, null, 'center');
                doc.setFontSize(16);
                
                let y = 40;
                steps.forEach((step, index) => {
                    if (y > 280) {
                        doc.addPage();
                        y = 20;
                    }
                    doc.setFontSize(18);
                    doc.text(`${index + 1}. ${step.title}`, 20, y);
                    y += 10;
                    doc.setFontSize(12);
                    const splitText = doc.splitTextToSize(step.message, 170);
                    doc.text(splitText, 20, y + 5);
                    y += splitText.length * 7 + 15;
                });
                
                doc.save('Our_Love_Story.pdf');
            });

            // Restart button
            restartBtn.addEventListener('click', function() {
                currentStep = 0;
                finalCelebration.classList.add('hidden');
                showStep(currentStep);
            });
        }

        // Add CSS animations dynamically
        const style = document.createElement('style');
        style.textContent = `
            @keyframes twinkle {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
            @keyframes fall {
                0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                10% { opacity: 1; }
                100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
            }
            @keyframes sparkle {
                0% { opacity: 0; transform: scale(0.5); }
                100% { opacity: 1; transform: scale(1.5); }
            }
        `;
        document.head.appendChild(style);

        // Initialize the app
        window.addEventListener('load', init);
    </script>
</body>
</html>
